<div>
  <div style="display:flex; align-items:flex-start; justify-content:space-between; gap:16px; margin-bottom:16px;">
    <div>
      <h1 style="margin:0;">Dashboard</h1>
      <div style="opacity:.7;">Overview â€¢ Accounts</div>
    </div>
    <div>
      <button mat-raised-button color="primary" (click)="generatePaymentLink()">Create Payment Link</button>
      <button mat-stroked-button>Add Currency</button>
    </div>
  </div>

  <div style="display:grid; grid-template-columns: repeat(3, minmax(0,1fr)); gap:16px; margin-bottom:16px;">
    <mat-card>
      <mat-card-subtitle>Total Balance</mat-card-subtitle>
      <mat-card-title>${{ totalBalanceUsd | number:'1.2-2' }}</mat-card-title>
      <mat-card-content>Across all virtual accounts</mat-card-content>
    </mat-card>
    <mat-card>
      <mat-card-subtitle>Pending</mat-card-subtitle>
      <mat-card-title>${{ pendingUsd | number:'1.2-2' }}</mat-card-title>
      <mat-card-content>Awaiting settlement</mat-card-content>
    </mat-card>
    <mat-card>
      <mat-card-subtitle>Last Deposit</mat-card-subtitle>
      <mat-card-title>${{ lastDepositUsd | number:'1.2-2' }}</mat-card-title>
      <mat-card-content>2 days ago</mat-card-content>
    </mat-card>
  </div>

  <div style="display:grid; grid-template-columns: 1.2fr 1fr; gap:16px;">
    <mat-card>
      <mat-card-header>
        <mat-card-title>Recent Activity</mat-card-title>
        <mat-card-actions>
          <button mat-button (click)="openActivityModal()">View all</button>
        </mat-card-actions>
      </mat-card-header>
      <mat-card-content>
        <div *ngFor="let t of transactions" style="display:flex; align-items:flex-start; gap:12px; padding:8px 0; border-bottom:1px solid rgba(0,0,0,.06);">
          <div style="width:24px;">{{ t.type === 'deposit' ? 'â¬‡' : t.type === 'payment' ? 'ðŸ’µ' : t.type === 'refund' ? 'â†©' : 'âš™' }}</div>
          <div style="flex:1;">
            <div style="display:flex; justify-content:space-between;">
              <div>{{ t.description }}</div>
              <div>{{ t.currency }} {{ t.amount | number:'1.2-2' }}</div>
            </div>
            <div style="opacity:.7; font-size:12px; display:flex; gap:12px;">
              <span>{{ t.timestamp }}</span>
              <span>{{ t.status }}</span>
            </div>
          </div>
        </div>
      </mat-card-content>
    </mat-card>

    <mat-card>
      <mat-card-header>
        <mat-card-title>USD Account Details</mat-card-title>
        <img src="https://flagcdn.com/us.svg" alt="US" style="width:24px; height:auto; margin-left:auto;" />
      </mat-card-header>
      <mat-card-content>
        <div style="display:grid; grid-template-columns: 1fr 1fr; gap:12px;">
          <div>
            <div style="opacity:.7; font-size:12px;">Account Name</div>
            <div>{{ account.accountName }}</div>
            <button mat-stroked-button (click)="copy(account.accountName, 'name')">{{ copiedField === 'name' ? 'Copied' : 'Copy' }}</button>
          </div>
          <div>
            <div style="opacity:.7; font-size:12px;">Account Number</div>
            <div style="font-family:monospace;">{{ account.accountNumber }}</div>
            <button mat-stroked-button (click)="copy(account.accountNumber, 'number')">{{ copiedField === 'number' ? 'Copied' : 'Copy' }}</button>
          </div>
          <div>
            <div style="opacity:.7; font-size:12px;">Routing Number</div>
            <div style="font-family:monospace;">{{ account.routingNumber }}</div>
            <button mat-stroked-button (click)="copy(account.routingNumber, 'routing')">{{ copiedField === 'routing' ? 'Copied' : 'Copy' }}</button>
          </div>
          <div>
            <div style="opacity:.7; font-size:12px;">IBAN</div>
            <div style="font-family:monospace;">{{ account.iban }}</div>
            <button mat-stroked-button (click)="copy(account.iban, 'iban')">{{ copiedField === 'iban' ? 'Copied' : 'Copy' }}</button>
          </div>
        </div>
        <div style="margin-top:8px; opacity:.8;">Share these details with payers to receive money directly to your USD virtual account.</div>
      </mat-card-content>
    </mat-card>
  </div>
</div>

<!-- Activity Modal -->
<app-activity-modal 
  [activities]="activitiesForModal"
  [isOpen]="isActivityModalOpen"
  (close)="closeActivityModal()">
</app-activity-modal>


